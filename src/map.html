<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->

<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <title>GMap</title>    
    <style type="text/css">
        #map-div {
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
    <div id="map-div"></div>
</body>

</html>

<script src="https://maps.googleapis.com/maps/api/js?libraries=drawing,places&callback=initMap&sensor=false&v=3.5" async defer></script>
<script>

    var map;

    function initMap() {

        /* Map initialize */

        var mapDiv = document.getElementById('map-div');
        map = new google.maps.Map(mapDiv, {
            zoom: 15,
            center: new google.maps.LatLng(20.593689657768653, 78.96287754178047),
            mapTypeId:google.maps.MapTypeId.ROADMAP,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
                position: google.maps.ControlPosition.LEFT_BOTTOM
            },
            zoomControl: true,
            streetViewControl: true,
        });

        var drawingManager = setDrawingManager();
        drawingManager.setMap(map);
        getCurrentLocation();
    }

    function setDrawingManager(argument) {
        return new google.maps.drawing.DrawingManager({
                        drawingMode: google.maps.drawing.OverlayType.MARKER,
                        drawingControl: true,
                        drawingControlOptions: 
                        {
                          position: google.maps.ControlPosition.TOP_CENTER,
                          drawingModes: 
                          [
                            google.maps.drawing.OverlayType.MARKER,
                            google.maps.drawing.OverlayType.CIRCLE,
                            google.maps.drawing.OverlayType.POLYGON,
                            google.maps.drawing.OverlayType.RECTANGLE
                          ]
                        },
                        markerOptions: 
                        {
                          draggable: true
                        },
                        circleOptions: 
                        {
                          fillColor: '#ffffff',
                          fillOpacity: 0.5,
                          strokeWeight: 1,
                          editable: true,
                          draggable: true,
                          zIndex: 1
                        },
                        polygonOptions: 
                        {
                          fillColor: '#94BBFD',
                          fillOpacity: 0.5,
                          strokeWeight: 1,
                          editable: true,
                          draggable: true,
                          zIndex: 1
                        },
                        rectangleOptions: 
                        {
                          fillOpacity: 0.5,
                          strokeWeight: 2,
                          editable: true,            
                          draggable: true
                        }
                    });
    }

    function getCurrentLocation() {
        if (navigator.geolocation) {    
            var latLng,
                geoOptions = {
                    enableHighAccuracy: false,
                    timeout: 5000, // Wait 5 seconds
                    maximumAge: 300000 //  Valid for 5 minutes
                };
    
            var userLocationFound = function(position){
                var pos = {
                  lat: position.coords.latitude,
                  lng: position.coords.longitude
                };
    
                infoWindowCurrent = new google.maps.InfoWindow({map: map});
                infoWindowCurrent.setPosition(pos);
                var infoMessage='You are in here...';
    
                infoWindowCurrent.setContent(infoMessage);
                map.setCenter(pos); 
                latLng = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
            }
    
            var userLocationNotFound = function(){
            }
            window.navigator.geolocation.getCurrentPosition(userLocationFound, userLocationNotFound, geoOptions);
          } else {
            handleLocationError(false, map.getCenter());
          }
    }

</script>