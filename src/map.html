<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->

<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <title>GMap</title>    
    <style type="text/css">
        #map-div {
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
    <div id="map-div"></div>
    <button onclick="getCurrentLocation();">My location</button>
</body>

</html>

<script src="https://maps.googleapis.com/maps/api/js?libraries=drawing,places&callback=initMap&sensor=false&v=3.5" async defer></script>
<script>

    var map;

    function initMap() {

        /* Map initialize */

        var mapDiv = document.getElementById('map-div');
        map = new google.maps.Map(mapDiv, {
            zoom: 15,
            center: new google.maps.LatLng(23.656277541383, 79.011777564883),
            mapTypeId:google.maps.MapTypeId.ROADMAP,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
                position: google.maps.ControlPosition.LEFT_BOTTOM
            },
            zoomControl: true,
            streetViewControl: true,
        });

        var drawingManager = setDrawingManager();
        drawingManager.setMap(map);
        var location = [
                          {"lat":23.656277541383,"lng":79.011777564883},
                          {"lat":23.656565910366,"lng":79.008800983429},
                          {"lat":23.656483299934,"lng":79.011769853532},
                          {"lat":23.654468080604,"lng":79.013434499502},
                          {"lat":23.656644221322,"lng":79.010773077607},
                          {"lat":23.657021034559,"lng":79.009449407458},
                          {"lat":23.656644221322,"lng":79.010773077607},
                          {"lat":23.657700953987,"lng":79.007706306875},
                          {"lat":23.653889490104,"lng":79.006211645901},
                          {"lat":23.656325142271,"lng":79.011971689761},
                          {"lat":23.656440612739,"lng":79.011751413345},
                          {"lat":23.656491898792,"lng":79.006704166532},
                          {"lat":23.655169817771,"lng":79.013470709324},
                          {"lat":23.655854660479,"lng":79.011267609894},
                          {"lat":23.656122761603,"lng":79.010804593563},
                          {"lat":23.653170855027,"lng":79.004747495055},
                          {"lat":23.659526646073,"lng":79.002556800842},
                          {"lat":23.659790133255,"lng":79.001756496727},
                          {"lat":23.718107530383,"lng":79.117184355855},
                          {"lat":23.654972963217,"lng":79.011714532971},
                          {"lat":23.657042531614,"lng":79.01015046984},
                          {"lat":23.708970015275,"lng":79.113909713924},
                          {"lat":23.769569178669,"lng":79.221093133092},
                          {"lat":23.703125930776,"lng":79.24744181335},
                          {"lat":23.703151104155,"lng":79.247320778668},
                          {"lat":24.06071248708,"lng":76.292162127793},
                          {"lat":23.720103043887,"lng":79.263656772673},
                          {"lat":23.720103043887,"lng":79.263656772673},
                          {"lat":23.735153284263,"lng":79.112784191966},
                          {"lat":23.778835601127,"lng":79.15558654815},
                          {"lat":23.558988799534,"lng":79.170387983322},
                          {"lat":23.572841300839,"lng":79.142190590501},
                          {"lat":23.616920731135,"lng":79.410553649068},
                          {"lat":23.580467297243,"lng":79.147646874189},
                          {"lat":23.583721355161,"lng":79.150355234742},
                          {"lat":23.580014058035,"lng":79.147601947188},
                          {"lat":23.57918163022,"lng":79.00459125638},
                          {"lat":29.672172544751,"lng":78.207194656134},
                          {"lat":23.7326417577,"lng":79.088361337781},
                          {"lat":23.827648836985,"lng":79.116128906608},
                          {"lat":23.693289521889,"lng":79.178327657282},
                          {"lat":23.82753106459,"lng":79.116092026234},
                          {"lat":23.784591919676,"lng":79.135504513979},
                          {"lat":23.580444251219,"lng":79.046866893768},
                          {"lat":23.667117812318,"lng":79.120167307556},
                          {"lat":23.580211947075,"lng":79.046813249588},
                          {"lat":23.580045093447,"lng":79.046873934567},
                          {"lat":23.580006990564,"lng":79.047666192055},
                          {"lat":23.670014131423,"lng":79.190798588097},
                          {"lat":23.581096298486,"lng":79.045599214733},
                          {"lat":21.087547951911,"lng":58.780137486756},
                          {"lat":23.578718246189,"lng":79.047268219292},
                          {"lat":23.528520821562,"lng":79.226186648011},
                          {"lat":23.618487108533,"lng":78.922759070992},
                          {"lat":23.618542402941,"lng":78.922761753201},
                          {"lat":23.618564520697,"lng":78.922808356583},
                          {"lat":23.618474206501,"lng":78.922739289701},
                          {"lat":23.618005124621,"lng":78.923012875021},
                          {"lat":23.617567681983,"lng":78.922359086573},
                          {"lat":23.529847253482,"lng":79.226576238871},
                          {"lat":23.529738126911,"lng":79.226654022932},
                          {"lat":23.544601561943,"lng":79.226725772023},
                          {"lat":23.548180154457,"lng":79.22364693135},
                          {"lat":23.528939502096,"lng":79.221990667284},
                          {"lat":23.703055936478,"lng":79.245259836316},
                          {"lat":23.712099932616,"lng":79.218526594341},
                          {"lat":23.524938927477,"lng":79.223677441478},
                          {"lat":23.514415243277,"lng":79.219749346375},
                          {"lat":23.515532456253,"lng":79.215535596013},
                          {"lat":23.516966004312,"lng":79.214687682688},
                          {"lat":23.564256954128,"lng":78.986470587552},
                          {"lat":23.581106131408,"lng":79.145230539143},
                          {"lat":23.567268023563,"lng":78.985919058323},
                          {"lat":23.691321844152,"lng":79.143900498748},
                          {"lat":24.468723185387,"lng":77.35816385597},
                          {"lat":23.575846027646,"lng":79.033632539213},
                          {"lat":23.585243575143,"lng":79.039506576955},
                          {"lat":23.567318422587,"lng":78.988563716412},
                          {"lat":23.566150635366,"lng":78.986787423491},
                          {"lat":23.665589787747,"lng":79.11533664912},
                          {"lat":23.663057268789,"lng":79.09583196044},
                          {"lat":23.658970803073,"lng":79.059213101864},
                          {"lat":23.653714745442,"lng":79.016610570252},
                          {"lat":23.584467103814,"lng":79.14943087846},
                          {"lat":23.581158983349,"lng":79.14595272392},
                          {"lat":23.651275666412,"lng":79.157246500254},
                          {"lat":23.560470739067,"lng":79.060536436737},
                          {"lat":23.776796805513,"lng":79.105282053351},
                          {"lat":23.580283850782,"lng":79.139738380909},
                          {"lat":23.783145040432,"lng":79.12985779345},
                          {"lat":23.58195391086,"lng":79.144805073738},
                          {"lat":23.703065146256,"lng":79.245423786342},
                          {"lat":18.415980242339,"lng":84.046007283032},
                          {"lat":23.702099957959,"lng":79.23360530287},
                          {"lat":23.581374692798,"lng":79.145550057292},
                          {"lat":23.581906590223,"lng":79.145637229085},
                          {"lat":23.754240285934,"lng":79.090866856277},
                          {"lat":23.754512481196,"lng":79.091359041631},
                          {"lat":23.754616817448,"lng":79.090979844332},
                          {"lat":23.581573808897,"lng":79.145580902696},
                          {"lat":23.610268564096,"lng":79.088707342744},
                          {"lat":23.593212971954,"lng":78.939424976706},
                          {"lat":23.686206173115,"lng":79.218096099794},
                          {"lat":23.55582878887,"lng":79.090627804399},
                          {"lat":23.551455911974,"lng":79.092695116997},
                          {"lat":0.14217369569343,"lng":0.14416538178921},
                          {"lat":23.633525098761,"lng":79.18813649565},
                          {"lat":23.588437598636,"lng":78.989588655531},
                          {"lat":23.634898385832,"lng":79.188496246934},
                          {"lat":23.725369014727,"lng":79.077815897763},
                          {"lat":23.834022495025,"lng":79.200021699071},
                          {"lat":23.731585017587,"lng":79.070383831859},
                          {"lat":23.551168541129,"lng":79.093132652342},
                          {"lat":23.55156440583,"lng":79.093114212155},
                          {"lat":23.551685193502,"lng":79.093121252954},
                          {"lat":23.553626694112,"lng":79.091222248971},
                          {"lat":23.686445658045,"lng":79.217898622155},
                          {"lat":23.724283669987,"lng":79.281593374908},
                          {"lat":23.724272313108,"lng":79.281598068774},
                          {"lat":23.776094188332,"lng":79.201468750834},
                          {"lat":23.564220997891,"lng":78.987068720162},
                          {"lat":23.551218024282,"lng":79.093001894653},
                          {"lat":23.551218024282,"lng":79.093001894653},
                          {"lat":23.550796955864,"lng":79.092868119478},
                          {"lat":23.551004724099,"lng":79.093292914331},
                          {"lat":23.551187289406,"lng":79.093019664288},
                          {"lat":23.5508845505,"lng":79.09304279834},
                          {"lat":23.550847361206,"lng":79.093036092818},
                          {"lat":23.550229279739,"lng":79.092956967652},
                          {"lat":23.553881481282,"lng":79.091912917793}
                      ];
        console.log(location.lat);
        console.log(location.lng);

        for (var i = 0; i < location.length; i++) {
          markerAdd(location[i]);
        }

    }


    function markerAdd(location) {
      console.log(location.lat);
      console.log(location.lng);
        markerLocate = new google.maps.Marker({
            position: location,
            map: map,
            title:'Latitude: '+location.lat+'\nLongitude:'+location.lng,
            draggable: false
        });


        google.maps.event.addListener(markerLocate, "click", function (e) {
          markerLocate.setTitle('Latitude: '+e.latLng.lat()+'\nLongitude:'+e.latLng.lng());
        });
    }

    function setDrawingManager(argument) {
        return new google.maps.drawing.DrawingManager({
                        drawingMode: google.maps.drawing.OverlayType.MARKER,
                        drawingControl: true,
                        drawingControlOptions: 
                        {
                          position: google.maps.ControlPosition.TOP_CENTER,
                          drawingModes: 
                          [
                            google.maps.drawing.OverlayType.MARKER,
                            google.maps.drawing.OverlayType.CIRCLE,
                            google.maps.drawing.OverlayType.POLYGON,
                            google.maps.drawing.OverlayType.RECTANGLE
                          ]
                        },
                        markerOptions: 
                        {
                          draggable: true
                        },
                        circleOptions: 
                        {
                          fillColor: '#ffffff',
                          fillOpacity: 0.5,
                          strokeWeight: 1,
                          editable: true,
                          draggable: true,
                          zIndex: 1
                        },
                        polygonOptions: 
                        {
                          fillColor: '#94BBFD',
                          fillOpacity: 0.5,
                          strokeWeight: 1,
                          editable: true,
                          draggable: true,
                          zIndex: 1
                        },
                        rectangleOptions: 
                        {
                          fillOpacity: 0.5,
                          strokeWeight: 2,
                          editable: true,            
                          draggable: true
                        }
                    });
    }

    function getCurrentLocation() {
        if (navigator.geolocation) {    
            var latLng,
                geoOptions = {
                    enableHighAccuracy: false,
                    timeout: 5000, // Wait 5 seconds
                    maximumAge: 300000 //  Valid for 5 minutes
                };
    
            var userLocationFound = function(position){
                var pos = {
                  lat: position.coords.latitude,
                  lng: position.coords.longitude
                };
    
                infoWindowCurrent = new google.maps.InfoWindow({map: map});
                infoWindowCurrent.setPosition(pos);
                var infoMessage='You are in here...';
    
                infoWindowCurrent.setContent(infoMessage);
                map.setCenter(pos); 
                latLng = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
            }
    
            var userLocationNotFound = function(){
            }
            window.navigator.geolocation.getCurrentPosition(userLocationFound, userLocationNotFound, geoOptions);
          } else {
            handleLocationError(false, map.getCenter());
          }
    }

</script>